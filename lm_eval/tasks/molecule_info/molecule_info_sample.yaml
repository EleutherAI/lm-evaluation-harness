task: molecule_info_sample
dataset_path: json
dataset_name: null
dataset_kwargs:
  data_files:
    valid: lm_eval/tasks/molecule_info/fda_sample.json
validation_split: valid
output_type: generate_until
generation_kwargs:
  until:
    - "Question: W"
doc_to_text: "Answer the following questions about exact mass of molecules. Think step by step. However, your last sentence should be \"The answer is [answer].\", where [answer] contains only numbers, without unit. \nQuestion: What is the exact mass of H2O?\nAnswer: One H2O molecule contains 2 hydrogen atoms with mass 1.008, and one oxygen atom which has mass 15.999. Therefore, the exact mass of an H2O molecule is 18.01. The answer is 18.01.\nQuestion: What is the exact mass of {{smiles}}?\nAnswer:"
doc_to_target: "{{exact_mass}}"
#filter_list:
#  - name: "extract_last_sentence"
#    filter:
#      - function: "regex"
#        regex_pattern: "The answer is (\\-?[0-9\\.\\,]*[0-9]+\\.?)"
metric_list:
  - metric: !function metrics.rounded_acc
    aggregation: mean
    higher_is_better: true

